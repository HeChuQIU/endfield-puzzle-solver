    <Window
    x:Class="EndfieldPuzzleSolver.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="终末地源石电路解谜器">

    <Grid x:Name="RootGrid" AllowDrop="True" Background="Transparent"
          DragOver="BoardDropArea_DragOver" Drop="BoardDropArea_Drop">
        <Grid.Resources>
            <SolidColorBrush x:Key="CardBackground" Color="{ThemeResource CardBackgroundFillColorDefault}" />
            <SolidColorBrush x:Key="CardBorderBrush" Color="{ThemeResource CardStrokeColorDefault}" />
            <SolidColorBrush x:Key="CanvasBackground" Color="{ThemeResource LayerFillColorDefault}" />
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <CommandBar Grid.Row="0" DefaultLabelPosition="Right">
            <AppBarButton x:Name="OpenScreenshotBtn" Icon="OpenFile" Label="打开截图" />
            <AppBarButton x:Name="PasteClipboardBtn" Label="粘贴截图">
                <AppBarButton.Icon>
                    <FontIcon Glyph="&#xE77F;" />
                </AppBarButton.Icon>
            </AppBarButton>
        </CommandBar>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="300" />
            </Grid.ColumnDefinitions>

            <ScrollViewer Grid.Column="0" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Border Background="{StaticResource CardBackground}" BorderBrush="{StaticResource CardBorderBrush}"
                        BorderThickness="1" CornerRadius="8" Margin="8" Padding="16">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Text="谜题主体" FontWeight="SemiBold" FontSize="18" Margin="0,0,0,12" />
                        <Border Grid.Row="1" BorderBrush="{StaticResource CardBorderBrush}" BorderThickness="1" CornerRadius="4" Padding="8"
                                Background="{StaticResource CanvasBackground}" MinHeight="300">
                            <Grid>
                                <Canvas x:Name="BoardCanvas" />
                                <StackPanel x:Name="BoardPlaceholder" HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                                    <FontIcon Glyph="&#xE8B9;" FontSize="48" HorizontalAlignment="Center" Opacity="0.4" />
                                    <TextBlock Text="拖入截图以加载谜题" FontSize="16" HorizontalAlignment="Center" Opacity="0.6" TextWrapping="Wrap" />
                                    <TextBlock Text="或使用顶部工具栏粘贴截图" FontSize="14" HorizontalAlignment="Center" Opacity="0.5" TextWrapping="Wrap" />
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </ScrollViewer>

            <ScrollViewer Grid.Column="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <Border Background="{StaticResource CardBackground}" BorderBrush="{StaticResource CardBorderBrush}"
                            BorderThickness="1" CornerRadius="8" Margin="8" Padding="16">
                        <StackPanel>
                            <TextBlock Text="谜题信息" FontWeight="SemiBold" FontSize="18" Margin="0,0,0,12" />
                            <StackPanel x:Name="PuzzleInfoPanel">
                                <TextBlock x:Name="GridSizeText" Text="网格大小: - × -" />
                                <TextBlock Text="颜色组:" FontWeight="SemiBold" Margin="0,12,0,4" />
                                <ItemsControl x:Name="ColorGroupsItems" />
                            </StackPanel>
                            <TextBlock x:Name="PlaceholderText" Text="请打开截图或拖入图片加载谜题" TextWrapping="Wrap" />
                        </StackPanel>
                    </Border>

                    <Border Background="{StaticResource CardBackground}" BorderBrush="{StaticResource CardBorderBrush}"
                            BorderThickness="1" CornerRadius="8" Margin="8" Padding="16">
                        <StackPanel>
                            <TextBlock Text="元件列表" FontWeight="SemiBold" FontSize="18" Margin="0,0,0,12" />
                            <ItemsControl x:Name="ComponentsItems" />
                        </StackPanel>
                    </Border>
                </StackPanel>
            </ScrollViewer>
        </Grid>

        <InfoBar Grid.Row="2" x:Name="StatusInfoBar" Message="就绪" IsOpen="True" IsClosable="False" />
    </Grid>
</Window>
