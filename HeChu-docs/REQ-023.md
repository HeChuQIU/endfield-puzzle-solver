# REQ-023: Web UI 视觉优化 - 现代化界面设计

## 状态
- [ ] 待开发
- [ ] 开发中
- [x] 已完成

## 创建信息
- 创建时间: 2026-02-16
- 最后更新: 2026-02-16
- 优先级: 中

## 需求描述

优化 Blazor WebAssembly 前端的视觉效果，将功能性界面升级为现代化的专业界面。

### 优化目标

1. **整体布局**：从单一区域布局改为侧边栏 + 主内容区的 Dashboard 风格
2. **视觉层次**：增强色彩、阴影、间距的层次感
3. **交互反馈**：添加悬停效果、过渡动画
4. **组件展示**：优化颜色组、元件列表、示例库的视觉呈现

## 技术实现

### 1. CSS 样式重构 (app.css)

#### 布局系统
- **Grid 布局**：主内容区使用 `1fr + 340px` 两列布局，左侧棋盘自适应，右侧固定宽度侧边栏
- **响应式**：小屏幕切换为单列布局

```css
.main-content {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 16px;
    flex: 1;
    overflow: hidden;
}
```

#### 色彩方案
- **背景色**：`#f0f2f5` (浅灰)
- **卡片背景**：白色带阴影
- **主题色**：`#0078d4` (Azure Blue)
- **文本层次**：`#323130` (主文本), 中性灰色 (次要文本)

#### 棋盘容器
- 添加阴影 `box-shadow: 0 2px 8px rgba(0,0,0,0.1)`
- 圆角 `border-radius: 4px`
- 白色背景 + 边框

#### 侧边栏组件

**颜色组 (.color-group-item)**
```css
.color-group-item {
    display: flex;
    align-items: center;
    background: #f3f2f1;
    padding: 2px 8px 2px 4px;
    border-radius: 4px;
}
.color-swatch {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0,0,0,0.2);
}
```

**元件列表 (.component-list)**
- Flexbox Wrap 布局，每个元件卡片带边框和阴影
- 元件标签使用组件颜色作为下边框强调

**示例库 (.sample-grid)**
```css
.sample-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 8px;
}
.sample-image-container:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0,0,0,0.12);
    border-color: #0078d4;
}
.sample-overlay {
    position: absolute;
    bottom: 0;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(4px);
}
```

### 2. Razor 组件更新 (Index.razor)

#### 工具栏优化
- 白色背景 + 底部边框 + 阴影
- 标题使用 `Typography.H5` + `FontWeight.Bold`

```cshtml
<FluentToolbar Style="padding:8px 16px;background-color:#ffffff;
    border-bottom:1px solid #e1dfdd;box-shadow:0 1px 2px rgba(0,0,0,0.03);">
    <FluentLabel Typo="Typography.H5" Weight="FontWeight.Bold">
        终末地源石电路解谜器
    </FluentLabel>
```

#### 棋盘区
- 添加加载状态叠加层 (loading-overlay) 显示 `FluentProgressRing`
- 占位符使用 `Size48.Image` 图标 + 多行文本提示

#### 信息面板
- **基本信息卡片**：使用 `Size24.Info` 图标，网格布局显示尺寸和格数
- **可用元件卡片**：使用 `Size24.Grid` 图标，Flexbox 显示元件形状
- **示例库卡片**：使用 `Size24.ImageCopy` 图标，2列网格显示示例图片

#### 图标修复
- 所有节头图标统一使用 `Icons.Regular.Size24.*` (Info, Grid, ImageCopy)
- 工具栏按钮使用 `Icons.Regular.Size16.*` (FolderOpen, ClipboardPaste)
- 修复 FluentUI 库不支持的 `Typography.Caption` 和 `FontWeight.SemiBold`，改用内联样式

```cshtml
<FluentLabel Typo="Typography.Body" 
    Style="font-size: 0.85em; color: var(--neutral-foreground-hint);">
    网格尺寸
</FluentLabel>
```

### 3. FluentUI 组件适配

#### 问题修复
1. **Typography.Caption 不存在**：改用 `Typography.Body` + `font-size: 0.85em`
2. **FontWeight.SemiBold 不存在**：改用 `FontWeight.Bold`
3. **图标尺寸**：确认库支持 Size16/Size24/Size48，不支持 Size20

#### 卡片样式统一
```css
fluent-card {
    padding: 16px;
    border: 1px solid #edebe9;
    box-shadow: 0 1.6px 3.6px 0 rgba(0,0,0,0.132);
    border-radius: 4px;
    background-color: white;
}
```

## 验证结果

### 编译状态
- ✅ 0 错误
- ✅ 0 警告
- ✅ 编译成功

### 视觉效果
- ✅ 现代化侧边栏布局
- ✅ 清晰的视觉层次
- ✅ 平滑的悬停/过渡效果
- ✅ 专业的色彩搭配
- ✅ 一致的组件风格

### 功能保留
- ✅ 打开截图功能正常
- ✅ 粘贴截图功能正常
- ✅ 示例加载功能正常
- ✅ 棋盘渲染正常
- ✅ 状态栏显示正常

## 相关文件

### 修改文件
- `src/EndfieldPuzzleSolver.Web/wwwroot/css/app.css` - 完全重写样式
- `src/EndfieldPuzzleSolver.Web/Pages/Index.razor` - 更新组件结构和图标

### 依赖版本
- Microsoft.FluentUI.AspNetCore.Components: 4.11.3
- Microsoft.FluentUI.AspNetCore.Components.Icons: 4.11.3

## 截图对比

### 优化前
- 基础功能界面
- 缺少视觉层次
- 单一的棋盘区域

### 优化后
- Dashboard 风格布局
- 侧边栏清晰显示谜题信息
- 现代化的卡片设计
- 带悬停效果的示例库
- 专业的色彩和阴影

## 后续优化建议

1. **主题切换**：支持深色模式
2. **动画优化**：添加组件加载动画
3. **触摸优化**：改善移动端交互
4. **国际化**：多语言支持
